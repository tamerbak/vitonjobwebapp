<ol class="breadcrumb">
  <li>VOUS ÊTES ICI</li>
  <li class="active"><a class="breadcrumb-link" [routerLink]="['/search/results']">Résultats de la recherche</a>
  </li>
</ol>
<div class="row">
  <div class="col-xs-12 pull-right" style="margin-bottom: 1em;">
    <a href="javascript:history.go(-1)"><button type="button" class="btn btn-secondary btn-sm" name="button"><span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span> Retour</button></a>
  </div>
</div>
<h1 class="page-title">{{(currentUser && currentUser.estRecruteur) ? 'Recruteur' : (projectTarget == 'employer' ? 'Employeur' : 'Jobyer')}} - <span class="fw-semi-bold">Résultats de la recherche</span>
</h1>

<div class="row">
  <div class="col-lg-12 col-xs-12">
    <section class="widget" widget>
      <div class="abc-checkbox abc-checkbox-info">
        <input [(ngModel)]="selected" (ngModelChange)="onChange(selected)" id="mapView" type="checkbox">
        <label for="mapView">
          <b>Activer la vue Map</b>
        </label>
      </div>
      <div class="widget-middle-overflow windget-padding-md clearfix bg-info" *ngIf="selected" [ngStyle]="{'display':mapDisplay}">
        <sebm-google-map #Map [latitude]="lat" [longitude]="lng" [zoom]="10"  class="content-map">
          <sebm-google-map-marker *ngFor="let item of searchResultPos, let i=index" [latitude]="item.lat" [longitude]="item.lng">
            <sebm-google-map-info-window>
                <div [innerHTML]="item.info"></div>
            </sebm-google-map-info-window>
          </sebm-google-map-marker>
          <!-- <sebm-google-map-marker *ngFor="let pos of searchResults, let i=index" [latitude]="Number(pos.latitude)" [longitude]="Number(pos.longitude)">
          </sebm-google-map-marker> -->
        </sebm-google-map>
      </div>

    </section>
  </div>
  <div class="col-lg-12 col-xs-12">
    <div *ngFor="let item of searchResults, let i=index">
      <section
        class="widget" widget

      >
        <div class="widget-body row">
          <div class="col-md-1 col-xs-4">
            <span class="thumb-sm pull-xs-left mr" style="width: 100%;">
                <img class="img-circle" [src]="item.avatar">
            </span>
          </div>
          <div class="col-md-8 col-xs-4">
            <div class="row">
              <h4 class="name no-margin mb-xs col-md-10 col-xs-12" style="color: #40aea9;"><strong>
                {{projectTarget == 'employer' ? item.prenom + ' ' + item.nom : item.entreprise}}</strong></h4>
            </div>
            <div class="row">
              <h5 class="name no-margin mb-xs col-md-8 col-xs-12">{{item.titreoffre}}</h5>
            </div>

          </div>
          <div class="col-md-3 col-xs-4">
            <div class="row">
              <h4 class="pull-xs-right" style="margin-bottom:0px">
                <strong>
                  {{(item.matching.toString().indexOf('.') < 0) ?
                  item.matching:item.matching.toString().split('.')[0]}}%
                </strong>
              </h4>
            </div>
            <div class="row">
              <label class="pull-xs-right" style="font-size: small; color: #ccc">de correspondance avec l'offre</label>
            </div>
            <div class="row">
              <div class="col-md-1 col-xs-2 pull-xs-left">
                <recruit-button
                  [jobyer]="item" (onRecruite)="onRecruite($event)"
                  *ngIf="projectTarget == 'employer'"
                ></recruit-button>
              </div>
              <div class="col-md-1 col-xs-2">
                <button
                  type="button"
                  class="btn btn-secondary btn-sm pull-xs-right"
                  style="background-color: #40aea9; color: white;"
                  (click)="itemSelected(item)"
                >
                  Détails
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="row col-md-12 col-xs-12 mg-tp"
             *ngIf="projectTarget == 'employer' || item.accepteCandidature == 'true'" >
          <div class="col-lg-4 col-md-6 col-xs-12 mg-bt-2">
            <span><i class="fa fa-envelope" aria-hidden="true"></i><b> {{item.email}}</b></span>
          </div>
          <div class="col-lg-4 col-md-6 col-xs-12 mg-bt-2">
            <span><i class="fa fa-phone" aria-hidden="true"></i><b> {{item.tel}}</b></span>
          </div>
        </div>
        <!--<div class="alert alert-warning alert-sm alertDispo" *ngIf="currentUser.estEmployeur && item.checkedContract">Ce jobyer est sélectionné pour l'établissement d'un contrat, vous pouvez consulter les détails dans l'écran "Recrutement groupé"</div> -->
      </section>
    </div>
  </div>
</div>
<div modal-notification-contract [jobyer]="currentJobyer"></div>
<div modal-profile [fromPage]="fromPage" [jobyer]="currentJobyer" (onProfileUpdated)="onProfileUpdated($event)"></div>
