<ol class="breadcrumb">
  <li>VOUS ÊTES ICI</li>
  <li class="active"><a class="breadcrumb-link" [routerLink]="['/offer/list']">Mes offres</a></li>
  <li class="active"><a class="breadcrumb-link" [routerLink]="['/offer/edit']">
    {{obj == "add" ? 'Nouvelle offre' : 'Détails de l\'offre'}}</a>
  </li>
</ol>

<div class="row">
  <div class="col-xs-12 pull-right" style="margin-bottom: 1em;">
    <a href="javascript:history.go(-1)">
      <button type="button" class="btn btn-secondary btn-sm" name="button"><span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span> Retour
      </button>
    </a>
  </div>
</div>

<div class="alert-zone fixed">
  <alert *ngFor="let alert of alerts; let i = index" [type]="alert.type + ' alert-sm'" dismissible="true">
    <div [innerHTML]="alert.msg"></div>
  </alert>
  <alert *ngFor="let alert of alertsSlot; let i = index" [type]="alert.type + ' alert-sm'" dismissible="false">
    <div [innerHTML]="alert.msg"></div>
  </alert>
</div>

<div class="row">
  <div class="col-lg-3 col-xl-4 col-xs-12">
    <!-- VIDEO -->

    <section widget class="widget widget-offer">
      <header class="bb widget-offer-header">
        <h6><span class="fw-semi-bold widget-offer-header-title">Vidéo</span></h6>
      </header>
      <div class="widget-body widget-offer">

        <div *ngIf="videoAvailable" class="form-group row required">
          <div class="col-xs-12">
            <iframe class="iframe-class" width="100%" height="360px"
                    [style.display]="videoAvailable?'block':'none'" target="_parent" [src]="youtubeLinkSafe">
            </iframe>
          </div>
        </div>

        <div *ngIf="!videoAvailable" class="form-group row">
          <div *ngIf="!isLinkValid" class="col-xs-12">
            <alert [type]="'danger alert-sm'">
              <div [innerHTML]="'Le lien de la vidéo est non valide'"></div>
            </alert>
          </div>

          <div class="col-sm-12 col-xs-12">
            <input
              id="youtubeLink"
              class="form-control"
              name="youtubeLink"
              placeholder="Je me valorise avec une vidéo"
              type="text"
              [(ngModel)]="youtubeLink"
            />
          </div>
          <div class="col-sm-12 col-xs-12">
            <button
              class="btn btn-primary offer-video-btn"
              style="display: block; width: 100%;"
              (click)="updateVideo(false)"
              [disabled]="!youtubeLink || isOfferInContract || isOfferArchived"
            >
              <i class="glyphicon glyphicon-facetime-video"></i>
              Ajouter
            </button>
          </div>
        </div>

        <div *ngIf="videoAvailable" class="form-group row required">
          <div class="col-xs-12">
            <button
              class="btn btn-success offer-video-btn"
              style="display: block; width: 100%;"
              (click)="updateVideo(true)"
              [disabled]="isOfferInContract || isOfferArchived"
            >
              <i class="glyphicon glyphicon-trash"></i>
              Supprimer
            </button>
          </div>
        </div>

      </div>
    </section>

    <!-- !VIDEO -->
    <!-- JOB -->

    <section widget class="widget widget-offer" >
      <header class="bb widget-offer-header">
        <h6><span class="fw-semi-bold widget-offer-header-title">Job</span></h6>
      </header>
      <div class="widget-body">

        <legend><strong>Détails du job</strong></legend>

        <!-- Secteur -->
        <div class="form-group row required">
          <label class="col-md-12 col-xs-12 form-control-label">
            Secteur
          </label>
          <div class="col-md-12 col-xs-12">
            <div class="widget-body btn loaderPosition" [hidden]="hideJobLoader">
              <div class="loader animated fadeIn handle">
                <span class="spinner">
                  <i class="fa fa-spinner fa-spin"></i>
                </span>
              </div>
            </div>
            <!--<select
              data-minimum-results-for-search="10"
              data-placeholder="Recherchez votre secteur"
              class="sector-select select2 form-control"
              tabindex="-1"
              name="sector"
              id="sector"
              [disabled]="!hideJobLoader"
            >
              <option value=""></option>
              <option *ngFor="let s of sectors" [value]="s.id">{{s.libelle}}</option>
            </select>-->
            <select required id="input-sector-select" data-label="Choix du secteur d'activité" class="form-control" [(ngModel)]="offer.jobData.idSector"
                    (change)="sectorSelected($event.target.value)" [disabled]="!hideJobLoader">
              <option *ngFor="let s of sectors" [value]="s.id"> {{s.libelle}}</option>
            </select>
            <alert *ngIf="triedValidate && !offer.jobData.idSector" [type]="'danger alert-sm'">
              <div [innerHTML]="'* Veuillez renseigner le secteur'"></div>
            </alert>
          </div>
        </div>

        <!-- Job -->
        <div class="form-group row required">
          <label class="col-md-12 col-xs-12 form-control-label">
            Job
          </label>
          <div class="col-md-12 col-xs-12">
            <div class="widget-body btn loaderPosition" [hidden]="hideJobLoader">
              <div class="loader animated fadeIn handle">
                    <span class="spinner">
                      <i class="fa fa-spinner fa-spin"></i>
                    </span>
              </div>
            </div>
            <input required id="input-job-select" data-label="Choix du Job"
            type="hidden" class="select2 job-select form-control" name="job"
                   placeholder="Recherchez votre job" [(ngModel)]="selectedJob"/>

            <alert *ngIf="triedValidate && !offer.jobData.idJob" [type]="'danger alert-sm'">
              <div [innerHTML]="'* Veuillez renseigner le job'"></div>
            </alert>
          </div>
        </div>

        <!-- Niveau -->
        <div class="form-group row required">
          <label class="col-md-12 col-xs-12 form-control-label">
            Niveau d'expérience
          </label>
          <div class="col-md-12 col-xs-12">
            <div class="abc-radio">
              <input type="radio" name="radio3" id="radio5" value="junior"
                     [checked]="offer.jobData.level == 'junior'" (click)="watchLevel($event)">
              <label for="radio5">
                Débutant
              </label>
            </div>
            <div class="abc-radio">
              <input type="radio" name="radio3" id="radio6" value="senior"
                     [checked]="offer.jobData.level != 'junior'" (click)="watchLevel($event)">
              <label for="radio6">
                Expérimenté
              </label>
            </div>
          </div>
        </div>

        <div class="form-group row" *ngIf="convCoefficientsVisible()">
          <label class="col-md-12 col-xs-12 form-control-label">Coefficient</label>
          <div class="col-md-12 col-xs-12">
            <select class="form-control" [(ngModel)]="selectedCoefConvID"
                    (change)="updateHourRateThreshold('COEF',$event.target.value)">
              <option *ngFor="let s of coefficientsConventions" [value]="s.id">{{s.libelle}}</option>
            </select>
          </div>
        </div>
        <div class="form-group row" *ngIf="convNiveauxVisible()">
          <label class="col-md-12 col-xs-12 form-control-label">Niveau</label>
          <div class="col-md-12 col-xs-12">
            <select class="form-control" [(ngModel)]="selectedNivConvID"
                    (change)="updateHourRateThreshold('NIV',$event.target.value)">
              <option *ngFor="let s of niveauxConventions" [value]="s.id">{{s.libelle}}</option>
            </select>
          </div>
        </div>
        <div class="form-group row" *ngIf="convEchelonsVisible()">
          <label class="col-md-12 col-xs-12 form-control-label">Echelon</label>
          <div class="col-md-12 col-xs-12">
            <select class="form-control" [(ngModel)]="selectedEchConvID"
                    (change)="updateHourRateThreshold('ECH',$event.target.value)">
              <option *ngFor="let s of echelonsConventions" [value]="s.id">{{s.libelle}}</option>
            </select>
          </div>
        </div>
        <div class="form-group row" *ngIf="convCategoriesVisible()">
          <label class="col-md-12 col-xs-12 form-control-label">Catégorie</label>
          <div class="col-md-12 col-xs-12">
            <select class="form-control" [(ngModel)]="selectedCatConvID"
                    (change)="updateHourRateThreshold('CAT',$event.target.value)">
              <option *ngFor="let s of categoriesConventions" [value]="s.id">{{s.libelle}}</option>
            </select>
          </div>
        </div>

        <!-- Taux horaire -->
        <div class="form-group row required">
          <label class="col-xs-12 form-control-label">
            Taux horaire brut en €
          </label>
          <div class="col-xs-6">
            <input
              required
              id="input-hour-price"
              data-label="Taux horaire brut"
              type="number"
              step="0.01"
              class="form-control"
              min="0"
              [(ngModel)]="offer.jobData.remuneration"
              (change)="validateRate($event.target.value)"
            />
          </div>
          <div class="col-xs-6">
            <select class="form-control" disabled>
              <option>EUR</option>
            </select>
          </div>
          <div class="col-xs-12">
            <alert *ngIf="invalidHourRate " [type]="'danger alert-sm'">
              <div [innerHTML]="'* Le taux horaire devrait être supérieur ou égal à ' + invalidHourRateMessage"></div>
            </alert>
          </div>
        </div>

        <div class="form-group row required" *ngIf="projectTarget == 'employer'">
          <label class="col-xs-12 form-control-label">
            Nombre de postes
          </label>
          <div class="col-xs-12">

            <input  id="input-nbPoste" required data-label="Nombre de postes disponibles"
                    type="number"
                    step="1"
                    class="form-control"
                    min="1"
                    [(ngModel)]="offer.nbPoste"
            />
          </div>
        </div>
      </div>
    </section>

  </div>
  <div class="col-lg-9 col-xl-8 col-xs-12">
    <section class="widget widget-calendar widget-offer">
      <header class="bb widget-offer-header">
        <h6><span class="fw-semi-bold widget-offer-header-title">
          {{ projectTarget == 'jobyer' ? 'Disponibilités' : 'Horaires de travail'}}
        </span></h6>
      </header>
      <div class="widget-body">
        <div class="calendar-controls">
          <div class="btn-group ">
            <button class="btn btn-default" (click)="prev()"><i class="fa fa-angle-left"></i></button>
            <button class="btn btn-default" (click)="next()"><i class="fa fa-angle-right"></i></button>
          </div>
          <!--<div class="btn-group pull-right" data-toggle="buttons">
            <label class="btn btn-default active" (click)="changeView('month')">
              <input type="radio" name="view" value="month"> Mois
            </label>
            <label class="btn btn-default" (click)="changeView('agendaWeek')">
              <input type="radio" name="view" value="agendaWeek"> Semaine
            </label>
            <label class="btn btn-default" (click)="changeView('agendaDay')">
              <input type="radio" name="view" value="agendaDay"> Jour
            </label>
          </div>-->
        </div>
        <div id="calendar"></div>
      </div>
    </section>
    <div class="modal fade modal-margin-top" id="show-event-modal">
      <div class="modal-dialog " role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h5 *ngIf="event.title" class="modal-title">{{ event.title }}</h5>
          </div>
          <div class="modal-body">
            <alert *ngFor="let alert of alertsSlot; let i = index" [type]="alert.type + ' alert-sm'" dismissible="false">
              <div [innerHTML]="alert.msg"></div>
            </alert>
            <p><i class="fa fa-calendar text-muted fs-sm"></i> &nbsp; Du: {{ toDateString(event.start)}} à {{getHourFromDate(event.start)}}</p>
            <p><i class="fa fa-calendar text-muted fs-sm"></i> &nbsp; Au: {{ toDateString(event.end)}} à {{getHourFromDate(event.end)}}</p>
          </div>
          <div class="modal-footer no-border">
            <button type="button" class="btn btn-default" (click)="closeDetailsModal()">Annuler</button>
            <button (click)="removeSlot(event)" class="btn btn-danger">Supprimer</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade modal-margin-top" id="create-event-modal">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <section widget class="widget widget-offer">
            <header class="bb widget-offer-header">
              <h6><span class="fw-semi-bold widget-offer-header-title">Disponibilités</span></h6>
            </header>
            <div class="widget-body">
              <legend>
                <strong>
                  Créneau du {{toDateString(startDate)}}
                </strong>
                <strong>
                  {{ plageDate == 'multiple' ? 'au ' + toDateString(endDate) : ''}}
                </strong>
              </legend>

              <!-- Créneaux -->
              <div class="form-group row">
                <label class="col-md-2 col-xs-4 form-control-label"></label>
                <label class="col-md-5 col-xs-4 form-control-label">Heure de début</label>
                <label class="col-md-5 col-xs-4 form-control-label">Heure de fin</label>
              </div>

              <alert *ngFor="let alert of alertsSlot; let i = index" [type]="alert.type + ' alert-sm'" dismissible="false">
                <div [innerHTML]="alert.msg"></div>
              </alert>
              <alert *ngIf="triedValidate && slots.length == 0" [type]="'danger alert-sm'">
                <div [innerHTML]="'* Veuillez renseigner au moins un créneau'"></div>
              </alert>

              <div class="form-group row required">

                <div class="col-md-5 col-sm-3 col-xs-6 offer-hour-new">
                  <datetime [hidden]="isFulltime"
                            id="slotSHour"
                            [datepicker]="false"
                            [timepicker]="{ showMeridian: false, minuteStep: 15 }"
                            [(ngModel)]="slot.startHour"
                            readonly = "true"
                  ></datetime>
                  <input *ngIf="isFulltime" class="form-control"
                         value="00:00"
                         readonly/>
                </div>

                <div class="col-md-5 col-sm-3 col-xs-6 offer-hour-new">
                  <datetime [hidden]="isFulltime"
                            id="slotEHour"
                            [datepicker]="false"
                            [timepicker]="{ showMeridian: false, minuteStep: 15 }"
                            [(ngModel)]="slot.endHour"
                  ></datetime>
                  <input *ngIf="isFulltime" class="form-control"
                         value="23:59"
                         readonly/>
                </div>

                <div class="row container boxes">

                  <div class="col-xs-12 col-sm-4 col-md-4" *ngIf="projectTarget != 'jobyer'">
                    <input type="checkbox" id="box-2" [checked]="isPause" class="form-control" (change)="watchPause($event)">
                    <label for="box-2">Pause</label>
                  </div>

                  <div class="col-xs-12 col-sm-4 col-md-4" *ngIf="projectTarget == 'jobyer'">
                    <input type="checkbox" id="box-1" [checked]="isFulltime" class="form-control" (change)="watchFullTime($event)">
                    <label for="box-1">Jour entier</label>
                  </div>

                  <div class="col-xs-12 col-sm-4 col-md-4" *ngIf="plageDate != 'single'">
                    <input type="checkbox" id="box-3" [checked]="isPeriodic" class="form-control" (change)="watchPeriodicity($event)"/>
                    <label for="box-3"> Périodique</label>
                  </div>

                </div>

              </div>
            </div>
          </section>

          <div class="modal-footer no-border">
            <button (click)="closeModal()" class="btn btn-default">Annuler</button>
            <button (click)="createEvent()" [disabled]="!(slot.startHour && slot.endHour)" class="btn btn-success">Ajouter</button>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

<div class="row">
  <div class="col-sm-12">

    <section widget class="widget widget-offer" *ngIf="projectTarget == 'employer'">
      <header class="bb widget-offer-header">
        <h6><span class="fw-semi-bold widget-offer-header-title">Conditions d'emploi</span></h6>
      </header>
      <div class="widget-body" *ngIf="!personalizeConvention">
        <a href="#" (click)="onPersonalizeConvention()">Personnaliser les conditions d'emploi</a>
      </div>
      <div class="widget-body" *ngIf="personalizeConvention">
        <fieldset>
          <legend><strong>Conditions d'emploi</strong></legend>
          <alert *ngFor="let alert of alertsConditionEmp; let i = index" [type]="alert.type + ' alert-sm'"
                 dismissible="false">
            <div [innerHTML]="alert.msg"></div>
          </alert>

          <table class="table table-condensed">
            <thead>
            <tr>
              <th>Valeurs définies par la convention collective</th>
              <th colspan="3">Valeurs définies par l'employeur</th>
            </tr>
            </thead>

            <tr *ngFor="let item of categoriesHeure" [hidden]="item.code == 'HT'">
              <td>{{ item.libelle }}</td>
              <td>
                <div class="col-xs-10 input-group">
                  <input
                    type="number"
                    class="form-control"
                    [min]="item.coefficient"
                    [(ngModel)]="item.empValue"
                    (change)="watchConditionEmp($event, item)"
                  />
                  <div class="input-group-addon voj-input-group-addon">{{ preventNull(item.typeValue) }}</div>
                </div>
              </td>
              <td class="text-md-right">
                <div class="form-inline" *ngIf="item.debut>=0 && item.fin>=0" >
                  <input type="number" class="form-control" [(ngModel)]="item.debutHeure" min="0" max="23" step="1" />
                  :
                  <input type="number" class="form-control" [(ngModel)]="item.debutMinute" min="0" max="59" step="1" />
                </div>
              </td>
              <td class="text-md-right">
                <div class="form-inline" *ngIf="item.debut>=0 && item.fin>=0" >
                  <input type="number" class="form-control" [(ngModel)]="item.finHeure" min="0" max="23" step="1" />
                  :
                  <input type="number" class="form-control" [(ngModel)]="item.finMinute" min="0" max="59" step="1" />
                </div>
              </td>
            </tr>

            <tr *ngFor="let item of majorationsHeure">
              <td>{{ item.libelle }}</td>
              <td>
                <input
                  type="number"
                  class="form-control"
                  [min]="item.coefficient"
                  [(ngModel)]="item.empValue"
                  (change)="watchConditionEmp($event, item)"
                />
                <div class="input-group-addon voj-input-group-addon">{{ preventNull(item.typeValue) }}</div>
              </td>
              <td></td>
              <td></td>
            </tr>

            <tr *ngFor="let item of indemnites">
              <td>{{ item.libelle }}</td>
              <td>
                <div class="col-xs-10 input-group">
                  <input
                    type="number"
                    class="form-control"
                    [min]="item.coefficient"
                    [(ngModel)]="item.empValue"
                    (change)="watchConditionEmp($event, item)"
                  />
                  <div class="input-group-addon voj-input-group-addon">{{ preventNull(item.typeValue) }}</div>
                </div>
              </td>
              <td></td>
              <td></td>
            </tr>

          </table>

        </fieldset>
      </div>
    </section>

    <!--  COORDONNEES ET CONTACT -->
    <section widget class="widget widget-offer">
      <header class="bb widget-offer-header">
        <h6><span class="fw-semi-bold widget-offer-header-title">Coordonnées</span></h6>
      </header>
      <div class="widget-body widget-offer">

        <div class="form-group row required">
          <label class="col-md-4 col-xs-12 form-control-label text-md-right">
            {{ projectTarget == 'employer' ? 'Adresse de la mission' : 'Adresse de départ vers le lieu de travail' }}
          </label>
          <div class="col-md-7 col-xs-12">
            <input id="autocompleteOfferAdress" required data-label="Adresse de la mission  "
                   type="text" class="form-control"
                   placeholder="{{ projectTarget == 'employer' ? 'Saisissez  l\'adresse de la mission' : 'Saisissez  l\'adresse de départ vers le lieu de travail' }}" (keyup)="watchOfferAddress($event)"
                   [(ngModel)]="offerAddress" (input)="autocompleteOfferAddress()" />
          </div>
        </div>

        <div class="form-group row" *ngIf="projectTarget == 'employer'">
          <label class="col-md-4 col-xs-12 form-control-label text-md-right">
            Contact sur place
          </label>
          <div class="col-md-7 col-xs-12">
            <input id="contactsp" type="text" class="form-control" [(ngModel)]="offerContact" />
          </div>
        </div>
        <div class="form-group row" *ngIf="projectTarget == 'employer'">
          <label class="col-md-4 col-xs-12 form-control-label text-md-right">
            N° Téléphone
          </label>
          <div class="col-md-7 col-xs-12">
            <input id="phonesp" type="text" class="form-control" [(ngModel)]="tel" />
          </div>
        </div>

      </div>
    </section>



    <!--  Specifications -->
    <section widget class="widget widget-offer" *ngIf="projectTarget == 'employer'">
      <header class="bb widget-offer-header">
        <h6><span class="fw-semi-bold widget-offer-header-title">Prérequis obligatoires</span></h6>
      </header>
      <div class="widget-body">
        <div class="form-group row" *ngIf="projectTarget == 'employer'">
          <label class="col-md-4 col-xs-12 form-control-label text-md-right">
            Formations et habilitations
          </label>
          <div class="col-md-8 col-xs-12">

            <!-- Selected specifications -->
            <div class="form-group row" *ngFor="let p of prerequisObligatoires">
              <div class="col-md-9 col-xs-9">
                <input class="form-control" value="{{ p }}" disabled />
              </div>
              <div class="col-md-3 col-xs-3">
                <button
                  class="btn btn-danger list-button"
                  role="button"
                  (click)="removePrerequis(p)"
                  [disabled]="isOfferInContract || isOfferArchived"
                >
                  <i class="glyphicon glyphicon-trash"></i>
                </button>
              </div>
            </div>

            <!-- New specificatoin input -->
            <div class="row">
              <div class="col-md-9 col-xs-12">
                <input
                  *ngIf="projectTarget == 'employer'"
                  type="hidden"
                  class="select2 prerequis-select form-control"
                  name="prerequis"
                  placeholder="Formations et habilitations"
                  [(ngModel)]="prerequisOb"
                />
              </div>
              <div class="col-md-3 col-xs-12">
                <button
                  class="btn btn-success list-button"
                  role="button"
                  (click)="addPrerequis()"
                  [disabled]="isOfferInContract || isOfferArchived || isEmpty(prerequisOb) === true"
                >
                  Ajouter
                </button>
              </div>
            </div>

          </div>
        </div>
      </div>

      <div class="form-group row" *ngIf="projectTarget == 'employer'">
        <label class="col-md-4 col-xs-12 form-control-label text-md-right">
          Equipement de protection individuel
        </label>
        <div class="col-md-8 col-xs-12">

          <!-- Selected protections -->
          <div class="form-group row" *ngFor="let e of epiList">
            <div class="col-md-9 col-xs-9">
              <input class="form-control" value="{{ e }}" disabled />
            </div>
            <div class="col-md-3 col-xs-3">
              <button
                class="btn btn-danger list-button"
                role="button"
                (click)="removeEPI(p)"
                [disabled]="isOfferInContract || isOfferArchived"
              >
                <i class="glyphicon glyphicon-trash"></i>
              </button>
            </div>
          </div>

          <!-- New protection input -->
          <div class="row">
            <div class="col-md-9 col-xs-12">
              <input
                *ngIf="projectTarget == 'employer'"
                type="hidden"
                class="select2 epi-select form-control"
                name="EPI"
                placeholder="Equipement de protection individuel"
                [(ngModel)]="epi"
              />
            </div>
            <div class="col-md-3 col-xs-12">
              <button
                class="btn btn-success list-button"
                role="button"
                (click)="addEPI()"
                [disabled]="isOfferInContract || isOfferArchived || isEmpty(epi) === true"
              >
                Ajouter
              </button>
            </div>
          </div>

        </div>
      </div>

    </section>

    <!-- !JOB -->
    <!-- PROFILE -->

    <section widget class="widget widget-offer">
      <header class="bb widget-offer-header">
        <h6><span class="fw-semi-bold widget-offer-header-title">Profil recherché</span></h6>
      </header>
      <div class="widget-body">

        <!-- Qualities -->
        <div class="form-group row">
          <label class="col-md-4 col-xs-12 form-control-label text-md-right">
            Mon {{ projectTarget == 'employer' ? 'jobyer' : 'employeur' }} idéal
          </label>

          <div class="col-md-8 col-xs-12">

            <!-- Selected Qualities -->
            <div class="form-group row" *ngFor="let item of offer.qualityData">
              <div class="col-md-9 col-xs-9">
                <input class="form-control" value="{{item.libelle}}" disabled/>
              </div>
              <div class="col-md-3 col-xs-3">
                <button
                  style="display: block;"
                  class="btn btn-danger mb-xs list-button"
                  role="button"
                  [disabled]="isOfferInContract || isOfferArchived"
                  (click)="removeQuality(item)"
                >
                  <i class="glyphicon glyphicon-trash"></i>
                </button>
              </div>
            </div>

            <!-- New quality input -->
            <div class="row">
              <div class="col-md-9 col-xs-12">
                <select class="form-control" [(ngModel)]="selectedQuality">
                  <option *ngFor="let q of qualities" [value]="q.idQuality">{{q.libelle}}</option>
                </select>
              </div>
              <div class="col-md-3 col-xs-12">
                <button
                  style="display: block; width: 100%;"
                  class="btn btn-success mb-xs"
                  role="button"
                  (click)="addQuality()"
                  [disabled]="!selectedQuality || isOfferInContract || isOfferArchived"
                >
                  Ajouter
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Langues -->
        <div class="form-group row">
          <label class="col-md-4 col-xs-12 form-control-label text-md-right">
            {{ (projectTarget == 'employer') ? 'Langue(s) requise(s)' : 'Langue(s) privilégiée(s)'}}
          </label>

          <div class="col-md-8 col-xs-12">

            <!-- Selected Languages -->
            <div class="form-group row" *ngFor="let item of offer.languageData">
              <div class="{{ (projectTarget != 'employer') ? 'col-md-9 col-xs-12' : 'col-md-6 col-xs-6' }}">
                <input class="form-control" value="{{item.libelle}}" disabled/>
              </div>
              <div class="col-md-3 col-xs-6" *ngIf="projectTarget == 'employer'">
                <!--<input class="form-control" value="{{(item.level == 'junior' ? 'Débutant' : 'Courant')}}" disabled/>-->
                <select class="form-control" [(ngModel)]="item.level" disabled>
                  <option value="junior">Débutant</option>
                  <option value="medium">Intermédiaire</option>
                  <option value="senior">Courant</option>
                </select>

              </div>
              <div class="col-md-3 col-xs-12">
                <button
                  style="display: block; width: 100%;"
                  class="btn btn-danger mb-xs btn-remove-language"
                  role="button"
                  [disabled]="isOfferInContract || isOfferArchived"
                  (click)="removeLanguage(item)"
                >
                  <i class="glyphicon glyphicon-trash"></i>
                </button>
              </div>
            </div>

            <!-- New language input -->
            <div class="row">
              <div class="{{ (projectTarget != 'employer') ? 'col-md-9 col-xs-12' : 'col-md-6 col-xs-6' }}">
                <select class="form-control" [(ngModel)]="selectedLang">
                  <option *ngFor="let l of langs" [value]="l.idLanguage">{{l.libelle}}</option>
                </select>
              </div>
              <div class="col-md-3 col-xs-6" *ngIf="projectTarget == 'employer'">
                <select class="form-control" [(ngModel)]="selectedLevel">
                  <option value="junior">Débutant</option>
                  <option value="medium">Intermédiaire</option>
                  <option value="senior">Courant</option>
                </select>
              </div>
              <div class="col-md-3 col-xs-12">
                <button
                  style="display: block; width: 100%;"
                  class="btn btn-success mb-xs"
                  role="button"
                  (click)="addLanguage()"
                  [disabled]="!(selectedLang && selectedLevel) || isOfferInContract || isOfferArchived"
                >
                  Ajouter
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- !PROFILE -->
    <!-- ACTIONS -->

    <section class="widget" widget >

      <div class="widget-body">
        <form class="form-horizontal" role="form">
          <div class="form-actions">
            <div class="container-fluid">
              <div class="row">
                <div class="col-xs-12">
                  <button type="button" class="btn btn-success fwidth" [disabled]="isOfferInContract || isOfferArchived || !initSectorDone" (click)="editOffer()">
                    Enregistrer
                  </button>
                </div>
              </div>
              <div *ngIf="obj === 'detail'" class="row">
                <div class="col-md-6 col-xs-12">
                  <button type="submit" class="btn btn-primary fwidth" (click)="copyOffer()">
                    Copier l'offre
                  </button>
                </div>
                <div class="col-lg-6 col-md-6 col-xs-12">
                  <button type="submit" class="btn btn-primary fwidth" (click)="changePrivacy()" [disabled]="isOfferInContract || isOfferArchived">
                    {{offrePrivacyTitle}}
                  </button>
                </div>

                <div class="col-lg-6 col-md-6 col-xs-12">
                  <button type="submit" class="btn btn-primary fwidth" (click)="autoSearchMode()" [disabled]="isOfferArchived">
                    {{autoSearchModeTitle}}
                  </button>
                </div>

                <div class="col-lg-6 col-md-6 col-xs-12">
                  <button type="submit" class="btn btn-primary fwidth" (click)="launchSearch()" *ngIf="!offer.obsolete" [disabled]="isOfferArchived">
                    Lancer une recherche
                  </button>
                </div>

                <div class="col-lg-6 col-md-6 col-xs-12">
                  <button type="submit" class="btn btn-primary fwidth" (click)="showQuote()" [disabled]="!initSectorDone" *ngIf="projectTarget == 'employer'">
                    Enregistrer et consulter le devis
                  </button>
                </div>
                <div class="col-lg-6 col-md-6 col-xs-12">
                  <button type="submit" class="btn btn-danger fwidth" (click)="deleteOffer()" [disabled]="offer.visible && !isOfferArchived">
                    Supprimer l'offre
                  </button>
                </div>
              </div>
            </div>
          </div>

        </form>
      </div>
    </section>
    <!-- !ACTIONS -->

  </div>
</div>

<!-- MODALS -->
<modal-options [params]="modalParams"></modal-options>
<modal-offer-temp-quote></modal-offer-temp-quote>
